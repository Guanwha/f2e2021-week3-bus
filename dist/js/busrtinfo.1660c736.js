(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["busrtinfo"],{"02d8":function(t,e,s){t.exports=s.p+"img/Logo-back.02b22db9.svg"},"408a":function(t,e,s){var o=s("e330");t.exports=o(1..valueOf)},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var o=s("e330"),a=s("1d80"),n=s("577e"),r=s("5899"),i=o("".replace),u="["+r+"]",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),p=function(t){return function(e){var s=n(a(e));return 1&t&&(s=i(s,c,"")),2&t&&(s=i(s,l,"")),s}};t.exports={start:p(1),end:p(2),trim:p(3)}},"5ead":function(t,e,s){},"689c":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"h-full flex-1 flex-css"},[o("header",{staticClass:"p-4 bg-dark-700 relative",on:{click:function(e){return e.target!==e.currentTarget?null:t.hideAllPanel()}}},[o("button",{staticClass:"absolute inset-y-0 left-4 focus:outline-none",on:{click:function(e){return t.onBack()}}},[t._m(0)]),o("div",{staticClass:"w-full flex-rcc"},[o("button",{staticClass:"focus:outline-none",on:{click:function(e){return t.onBackHome()}}},[o("img",{attrs:{src:s("02d8"),alt:"回首頁"}})])])]),o("main",{staticClass:"h-full px-4 pb-4 bg-dark-800 overflow-auto"},[o("div",{staticClass:"grid grid-cols-1 md:grid-cols-2"},[o("div",{staticClass:"flex-ccc"},[o("div",{staticClass:"p-3 text-light-800"},[t._v(t._s(t.routeName))])]),o("Dropdown",{attrs:{classPadding:"px-4 py-2 md:py-3",classBorder:t.classDDBorder,classBgTextColor:t.classDDBgTextColor,classBgOption:t.classDDBgOption,types:t.curSubRouteList},model:{value:t.selectedSubRouteUID,callback:function(e){t.selectedSubRouteUID=t._n(e)},expression:"selectedSubRouteUID"}})],1),o("ul",{staticClass:"tabs mt-4 -mx-4"},[o("li",{staticClass:"tab",on:{click:function(e){t.curTab="to"}}},[o("span",{staticClass:"text-main-500"},[t._v("往")]),o("span",{staticClass:"ml-1 text-light-800"},[t._v(t._s(t.toStopName))])]),o("li",{staticClass:"tab",on:{click:function(e){t.curTab="back"}}},[o("span",{staticClass:"text-main-500"},[t._v("往")]),o("span",{staticClass:"ml-1 text-light-800"},[t._v(t._s(t.fromStopName))])]),o("div",{staticClass:"indicator"},[o("div",{class:["to"===t.curTab?"indicator-1":"indicator-2"]})])]),o("div",{staticClass:"mt-4 text-light-800 text-xs md:text-sm leading-none"},[t.curRouteStops?[t.curRouteStops[t.direction]?t._l(t.curRouteStops[t.direction].Stops,(function(e,s){return o("div",{key:t.stopUUID(t.direction,e),staticClass:"stop"},[o("div",{staticClass:"flex-rlc"},[o("div",{class:t.classStopStatus(e)},[t._v(t._s(t.stopStatus(e)))]),o("div",{staticClass:"ml-3"},[t._v(t._s(e.StopName.Zh_tw))])]),o("div",{staticClass:"w-8 h-12 -mr-1 relative"},[o("div",{staticClass:"w-1/2 border-r border-main-500",class:t.classRouteLine(s,t.curRouteStops[t.direction].Stops.length)}),o("div",{staticClass:"absolute inset-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 border border-main-500 rounded-full bg-dark-900",class:t.classRouteStop(e)})])])})):o("div",[t._v(" 沒有站牌資料 ")])]:t._e()],2),o("div",{staticClass:"fixed left-0 inset-x-0 bg-main-500 duration-1000 cursor-pointer",class:t.classCD,on:{click:function(e){return t.refreshStopStatus()}}},[t._v(" 倒數 "+t._s(t.timerCD)+" 秒後更新 (點此可立即更新) ")])])])},a=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"w-12 h-12 flex-ccc"},[o("img",{attrs:{src:s("e233"),alt:"回上頁按鈕"}})])}],n=s("5530"),r=(s("b64b"),s("99af"),s("2f62")),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"relative inline-block text-left"},[t.isOpen?s("button",{staticClass:"fixed inset-0 h-full w-full cursor-default z-40",attrs:{tabindex:"-1"},on:{click:function(e){t.isOpen=!1}}}):t._e(),s("div",[s("span",{staticClass:"rounded shadow-sm"},[s("button",{staticClass:"flex-rsbc w-full rounded text-base leading-normal hover:bg-opacity-20 focus:bg-opacity-20 focus:outline-none focus:shadow-outline-blue transition ease-in-out duration-150",class:[t.classPadding,t.classBorder,t.classBgTextColor],attrs:{type:"button",id:"options-menu","aria-haspopup":"true","aria-expanded":"true"},on:{click:function(e){t.isOpen=!t.isOpen}}},[t.types&&t.types[t.curTypeID]?s("span",[t._v(t._s(t.types[t.curTypeID].name))]):s("span",{staticClass:"text-gray-300"},[t._v("-- 請選擇 --")]),s("svg",{staticClass:"ml-2 h-4 w-4",attrs:{viewBox:"0 0 16 16",fill:"currentColor"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])])]),t.isOpen?s("div",{staticClass:"w-full rounded-md shadow-lg z-50 whitespace-nowrap",class:t.classOption},[s("div",{staticClass:"rounded-md border shadow-xs",class:[t.classBorder,t.classBgOption]},[s("div",{staticClass:"py-1",attrs:{role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"}},t._l(t.types,(function(e,o){return s("a",{key:o,staticClass:"block text-xs md:text-base leading-none focus:outline-none hover:bg-opacity-20",class:[t.classPadding,t.classBgTextColor],attrs:{href:"#",role:"menuitem",value:o},on:{click:function(e){return e.preventDefault(),t.onSelect(o)}}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e()])},u=[],c=(s("a9e3"),{name:"Dropdown",model:{prop:"curTypeID",event:"change"},props:{curTypeID:[Number,String],types:[Object,Array],classPadding:{type:String,default:"px-4 py-2 md:py-4"},classBorder:{type:String,default:"border border-gray-300 focus:border-blue-300 "},classBgTextColor:{type:String,default:"bg-white text-gray-700  active:bg-gray-50 active:text-gray-800  hover:bg-gray-100"},classBgOption:{type:String,default:"bg-white text-gray-700"},direction:{type:String,default:"down"}},data:function(){return{isOpen:!1}},methods:{onSelect:function(t){this.$emit("change",t),this.isOpen=!1}},computed:{classOption:function(){return"up"===this.direction?"origin-bottom-left absolute bottom-full left-0 mb-2":"origin-top-left    absolute top-full    left-0 mt-2"}}}),l=c,p=s("2877"),f=Object(p["a"])(l,i,u,!1,null,null,null),d=f.exports,b=s("3fa5"),m=void 0,h=function(t){var e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];clearTimeout(e),e=setTimeout((function(){t.apply(m,a)}),s)}},g={name:"BusRealTimeInfo",components:{Dropdown:d},data:function(){return{city:this.$route.params.city,routeUID:this.$route.params.route_uid,curTab:"to",selectedSubRouteUID:"",debounceRefreshRouteStops:null,timer:null,timerCD:30}},watch:{selectedSubRouteUID:function(){this.debounceRefreshRouteStops()}},created:function(){var t=this;this.curRoute&&this.curRoute.RouteUID===this.routeUID||this.setCurrentRoute({city:this.city,routeUID:this.routeUID}).then((function(){if(""===t.selectedSubRouteUID&&t.curSubRouteList){var e=Object.keys(t.curSubRouteList);t.selectedSubRouteUID=e[0]||""}t.timer=setInterval((function(){t.timerCD-=1,t.timerCD<=0&&(t.getStopStatus().then((function(){})).catch((function(){})),t.timerCD=30)}),1e3)})).catch((function(e){Object(b["b"])("查詢該城市路線發生錯誤",e),t.onBack()})),this.debounceRefreshRouteStops=h(this.refreshRouteStops,500)},destroyed:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},methods:Object(n["a"])({onBack:function(){this.$router.back()},onBackHome:function(){this.$router.push({name:"Home"})},refreshRouteStops:function(){var t={routeUID:this.routeUID,subRouteUID:this.selectedSubRouteUID};this.getRouteStops(t).then((function(){})).catch((function(){}))},refreshStopStatus:function(){this.getStopStatus().then((function(){})).catch((function(){})),this.timerCD=30},classStopStatus:function(t){return 0===t.stopStatus?t.estimateTime<60?"stop-time-enter":"stop-time-normal":1===t.stopStatus||3===t.stopStatus?"stop-time-na2":"stop-time-na"},classRouteLine:function(t,e){return 0===t?"h-1/2 translate-y-full":t===e-1?"h-1/2":"h-full"},classRouteStop:function(t){return 0===t.stopStatus&&t.estimateTime<120?"bg-main-500":"bg-dark-900"},stopUUID:function(t,e){var s="".concat(this.curRouteStops[t].RouteUID,"-").concat(this.curRouteStops[t].SubRouteUID,"-").concat(e.StopUID);return s+="-".concat(e.estimateTime),s},stopStatus:function(t){return 0===t.stopStatus?t.estimateTime<60?"進站中":"".concat(parseInt(t.estimateTime/60,10),"分"):1===t.stopStatus?"尚未發車":2===t.stopStatus?"交管不停靠":3===t.stopStatus?"末班車已過":4===t.stopStatus?"今日未營運":"無資訊"}},Object(r["b"])("bus",["setCurrentRoute","getRouteStops","getStopStatus"])),computed:Object(n["a"])({classDDBorder:function(){return"border border-main-500"},classDDBgTextColor:function(){return"bg-dark-800 text-main-500 hover:bg-main-500 focus:bg-main-500 "},classDDBgOption:function(){return"bg-dark-800"},classCD:function(){if(this.curRouteStops){var t="to"===this.curTab?0:1,e=Object.keys(this.curRouteStops[t]);return e.length>0?"bottom-0":"-bottom-full"}return"-bottom-full"},routeName:function(){return this.curRoute&&this.curRoute.RouteName?this.curRoute.RouteName.Zh_tw:""},toStopName:function(){return this.curRoute?this.curRoute.DestinationStopNameZh:""},fromStopName:function(){return this.curRoute?this.curRoute.DepartureStopNameZh:""},direction:function(){return"back"===this.curTab?1:0}},Object(r["c"])("bus",["curRoute","curSubRouteList","curRouteStops"]))},v=g,S=(s("d88f"),Object(p["a"])(v,o,a,!1,null,null,null));e["default"]=S.exports},7156:function(t,e,s){var o=s("1626"),a=s("861d"),n=s("d2bb");t.exports=function(t,e,s){var r,i;return n&&o(r=e.constructor)&&r!==s&&a(i=r.prototype)&&i!==s.prototype&&n(t,i),t}},a9e3:function(t,e,s){"use strict";var o=s("83ab"),a=s("da84"),n=s("e330"),r=s("94ca"),i=s("6eeb"),u=s("1a2d"),c=s("7156"),l=s("3a9b"),p=s("d9b5"),f=s("c04e"),d=s("d039"),b=s("241c").f,m=s("06cf").f,h=s("9bf2").f,g=s("408a"),v=s("58a8").trim,S="Number",R=a[S],x=R.prototype,y=a.TypeError,C=n("".slice),D=n("".charCodeAt),I=function(t){var e=f(t,"number");return"bigint"==typeof e?e:_(e)},_=function(t){var e,s,o,a,n,r,i,u,c=f(t,"number");if(p(c))throw y("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=v(c),e=D(c,0),43===e||45===e){if(s=D(c,2),88===s||120===s)return NaN}else if(48===e){switch(D(c,1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+c}for(n=C(c,2),r=n.length,i=0;i<r;i++)if(u=D(n,i),u<48||u>a)return NaN;return parseInt(n,o)}return+c};if(r(S,!R(" 0o1")||!R("0b1")||R("+0x1"))){for(var k,w=function(t){var e=arguments.length<1?0:R(I(t)),s=this;return l(x,s)&&d((function(){g(s)}))?c(Object(e),s,w):e},T=o?b(R):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),N=0;T.length>N;N++)u(R,k=T[N])&&!u(w,k)&&h(w,k,m(R,k));w.prototype=x,x.constructor=w,i(a,S,w)}},d88f:function(t,e,s){"use strict";s("5ead")},e233:function(t,e,s){t.exports=s.p+"img/back.de55d339.svg"}}]);
//# sourceMappingURL=busrtinfo.1660c736.js.map